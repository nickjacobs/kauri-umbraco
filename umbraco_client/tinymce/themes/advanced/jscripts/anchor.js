var action,element;function init(){tinyMCEPopup.resizeToInnerSize();var C=tinyMCE.getInstanceById(tinyMCE.getWindowArg("editor_id"));var B=tinyMCE.getParentElement(C.getFocusElement(),"a","name");var A=C.getFocusElement();action="insert";if(B!=null){element=B;action="update"}if(tinyMCE.getAttrib(A,"class")=="mceItemAnchor"){element=A;action="update"}if(action=="update"){document.forms[0].anchorName.value=element.nodeName=="IMG"?element.getAttribute("title"):element.getAttribute("name")}document.forms[0].insert.value=tinyMCE.getLang("lang_"+action,"Insert",true)}function insertAnchor(){var C=tinyMCE.getInstanceById(tinyMCE.getWindowArg("editor_id"));var B=document.forms[0].anchorName.value,D;tinyMCEPopup.execCommand("mceBeginUndoLevel");if(action=="update"){if(element.nodeName=="IMG"){element.setAttribute("title",B)}else{element.setAttribute("name",B)}}else{var A=C.getRng();if(A.collapse){A.collapse(false)}B=B.replace(/&/g,"&amp;");B=B.replace(/\"/g,"&quot;");B=B.replace(/</g,"&lt;");B=B.replace(/>/g,"&gt;");if(tinyMCE.isGecko){html='<a id="mceNewAnchor" name="'+B+'"></a>'}else{html='<a name="'+B+'"></a>'}tinyMCEPopup.execCommand("mceInsertContent",false,html);if(tinyMCE.isGecko){D=C.getDoc().getElementById("mceNewAnchor");if(D){C.selection.selectNode(D,true,false,false);D.removeAttribute("id")}}tinyMCE.handleVisualAid(C.getBody(),true,C.visualAid,C)}tinyMCEPopup.execCommand("mceEndUndoLevel");tinyMCE.triggerNodeChange();tinyMCEPopup.close()};