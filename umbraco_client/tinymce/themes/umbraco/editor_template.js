tinyMCE.importThemeLanguagePack("umbraco");var TinyMCE_UmbracoTheme={_autoImportCSSClasses:true,_resizer:{},_buttons:[["bold","{$lang_bold_img}","lang_bold_desc","Bold"],["italic","{$lang_italic_img}","lang_italic_desc","Italic"],["underline","{$lang_underline_img}","lang_underline_desc","Underline"],["strikethrough","strikethrough.gif","lang_striketrough_desc","Strikethrough"],["justifyleft","justifyleft.gif","lang_justifyleft_desc","JustifyLeft"],["justifycenter","justifycenter.gif","lang_justifycenter_desc","JustifyCenter"],["justifyright","justifyright.gif","lang_justifyright_desc","JustifyRight"],["justifyfull","justifyfull.gif","lang_justifyfull_desc","JustifyFull"],["bullist","bullist.gif","lang_bullist_desc","InsertUnorderedList"],["numlist","numlist.gif","lang_numlist_desc","InsertOrderedList"],["outdent","outdent.gif","lang_outdent_desc","Outdent"],["indent","indent.gif","lang_indent_desc","Indent"],["cut","cut.gif","lang_cut_desc","Cut"],["copy","copy.gif","lang_copy_desc","Copy"],["paste","paste.gif","lang_paste_desc","Paste"],["undo","undo.gif","lang_undo_desc","Undo"],["redo","redo.gif","lang_redo_desc","Redo"],["link","link.gif","lang_link_desc","mceLink",true],["unlink","unlink.gif","lang_unlink_desc","unlink"],["image","image.gif","lang_image_desc","mceImage",true],["cleanup","cleanup.gif","lang_cleanup_desc","mceCleanup"],["help","help.gif","lang_help_desc","mceHelp"],["code","code.gif","lang_theme_code_desc","mceCodeEditor"],["hr","hr.gif","lang_theme_hr_desc","inserthorizontalrule"],["removeformat","removeformat.gif","lang_theme_removeformat_desc","removeformat"],["sub","sub.gif","lang_theme_sub_desc","subscript"],["sup","sup.gif","lang_theme_sup_desc","superscript"],["forecolor","forecolor.gif","lang_theme_forecolor_desc","mceForeColor",true],["backcolor","backcolor.gif","lang_theme_backcolor_desc","mceBackColor",true],["charmap","charmap.gif","lang_theme_charmap_desc","mceCharMap"],["visualaid","visualaid.gif","lang_theme_visualaid_desc","mceToggleVisualAid"],["anchor","anchor.gif","lang_theme_anchor_desc","mceInsertAnchor"],["newdocument","newdocument.gif","lang_newdocument_desc","mceNewDocument"]],_buttonMap:"anchor,backcolor,bold,bullist,charmap,cleanup,code,copy,cut,forecolor,help,hr,image,indent,italic,justifycenter,justifyfull,justifyleft,justifyright,link,newdocument,numlist,outdent,paste,redo,removeformat,strikethrough,sub,sup,underline,undo,unlink,visualaid,advhr,ltr,rtl,emotions,flash,fullpage,fullscreen,iespell,insertdate,inserttime,pastetext,pasteword,selectall,preview,print,save,replace,search,table,cell_props,delete_col,delete_row,col_after,col_before,row_after,row_before,merge_cells,row_props,split_cells",getControlHTML:function(H){var E,L;for(E=0;E<TinyMCE_UmbracoTheme._buttons.length;E++){var G=TinyMCE_UmbracoTheme._buttons[E];if(G[0]==H){return tinyMCE.getButtonHTML(G[0],G[2],"{$themeurl}/images/"+G[1],G[3],(G.length>4?G[4]:false),(G.length>5?G[5]:null))}}switch(H){case"formatselect":var F='<select id="{$editor_id}_formatSelect" name="{$editor_id}_formatSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FormatBlock\',false,this.options[this.selectedIndex].value);" class="mceSelectList">';var K=tinyMCE.getParam("theme_umbraco_blockformats","p,address,pre,h1,h2,h3,h4,h5,h6",true).split(",");var B=[["p","{$lang_theme_paragraph}"],["address","{$lang_theme_address}"],["pre","{$lang_theme_pre}"],["h1","{$lang_theme_h1}"],["h2","{$lang_theme_h2}"],["h3","{$lang_theme_h3}"],["h4","{$lang_theme_h4}"],["h5","{$lang_theme_h5}"],["h6","{$lang_theme_h6}"],["div","{$lang_theme_div}"],["blockquote","{$lang_theme_blockquote}"],["code","{$lang_theme_code}"],["dt","{$lang_theme_dt}"],["dd","{$lang_theme_dd}"],["samp","{$lang_theme_samp}"]];F+='<option value="">{$lang_theme_block}</option>';for(var E=0;E<K.length;E++){for(var L=0;L<B.length;L++){if(K[E]==B[L][0]){F+='<option value="&lt;'+B[L][0]+'&gt;">'+B[L][1]+"</option>"}}}F+="</select>";return F;case"styleselect":return'<select id="{$editor_id}_styleSelect" onmousedown="tinyMCE.themes.umbraco._setupCSSClasses(\'{$editor_id}\');" name="{$editor_id}_styleSelect" onfocus="tinyMCE.addSelectAccessibility(event,this,window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'mceSetCSSClass\',false,this.options[this.selectedIndex].value);" class="mceSelectList">{$style_select_options}</select>';case"fontselect":var A='<select id="{$editor_id}_fontNameSelect" name="{$editor_id}_fontNameSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FontName\',false,this.options[this.selectedIndex].value);" class="mceSelectList"><option value="">{$lang_theme_fontdefault}</option>';var J="Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact;WingDings=wingdings";var C="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sand;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats";var I=tinyMCE.getParam("theme_umbraco_fonts",C).split(";");for(E=0;E<I.length;E++){if(I[E]!=""){var D=I[E].split("=");A+='<option value="'+D[1]+'">'+D[0]+"</option>"}}A+="</select>";return A;case"fontsizeselect":return'<select id="{$editor_id}_fontSizeSelect" name="{$editor_id}_fontSizeSelect" onfocus="tinyMCE.addSelectAccessibility(event, this, window);" onchange="tinyMCE.execInstanceCommand(\'{$editor_id}\',\'FontSize\',false,this.options[this.selectedIndex].value);" class="mceSelectList"><option value="0">{$lang_theme_font_size}</option><option value="1">1 (8 pt)</option><option value="2">2 (10 pt)</option><option value="3">3 (12 pt)</option><option value="4">4 (14 pt)</option><option value="5">5 (18 pt)</option><option value="6">6 (24 pt)</option><option value="7">7 (36 pt)</option></select>';case"|":case"separator":return'<img src="{$themeurl}/images/separator.gif" width="2" height="20" class="mceSeparatorLine" />';case"spacer":return'<img src="{$themeurl}/images/separator.gif" width="2" height="15" border="0" class="mceSeparatorLine" style="vertical-align: middle" />';case"rowseparator":return"<br />"}return""},execCommand:function(editor_id,element,command,user_interface,value){switch(command){case"mceLink":var inst=tinyMCE.getInstanceById(editor_id);var doc=inst.getDoc();var selectedText="";if(tinyMCE.isMSIE){var rng=doc.selection.createRange();selectedText=rng.text}else{selectedText=inst.getSel().toString()}if(!tinyMCE.linkElement){if((tinyMCE.selectedElement.nodeName.toLowerCase()!="img")&&(selectedText.length<=0)){return true}}var href="",target="",title="",onclick="",action="insert",style_class="";if(tinyMCE.selectedElement.nodeName.toLowerCase()=="a"){tinyMCE.linkElement=tinyMCE.selectedElement}if(tinyMCE.linkElement!=null&&tinyMCE.getAttrib(tinyMCE.linkElement,"href")==""){tinyMCE.linkElement=null}if(tinyMCE.linkElement){href=tinyMCE.getAttrib(tinyMCE.linkElement,"href");target=tinyMCE.getAttrib(tinyMCE.linkElement,"target");title=tinyMCE.getAttrib(tinyMCE.linkElement,"title");onclick=tinyMCE.getAttrib(tinyMCE.linkElement,"onclick");style_class=tinyMCE.getAttrib(tinyMCE.linkElement,"class");if(onclick==""){onclick=tinyMCE.getAttrib(tinyMCE.linkElement,"onclick")}onclick=tinyMCE.cleanupEventStr(onclick);href=eval(tinyMCE.settings.urlconverter_callback+"(href, tinyMCE.linkElement, true);");mceRealHref=tinyMCE.getAttrib(tinyMCE.linkElement,"mce_href");if(mceRealHref!=""){href=mceRealHref;if(tinyMCE.getParam("convert_urls")){href=eval(tinyMCE.settings.urlconverter_callback+"(href, tinyMCE.linkElement, true);")}}action="update"}var template=new Array();template.file="link.htm";template.width=310;template.height=200;template.width+=tinyMCE.getLang("lang_insert_link_delta_width",0);template.height+=tinyMCE.getLang("lang_insert_link_delta_height",0);if(inst.settings.insertlink_callback){var returnVal=eval(inst.settings.insertlink_callback+"(href, target, title, onclick, action, style_class);");if(returnVal&&returnVal.href){TinyMCE_UmbracoTheme._insertLink(returnVal.href,returnVal.target,returnVal.title,returnVal.onclick,returnVal.style_class)}}else{tinyMCE.openWindow(template,{href:href,target:target,title:title,onclick:onclick,action:action,className:style_class,inline:"yes"})}return true;case"mceImage":var src="",alt="",border="",hspace="",vspace="",width="",height="",align="";var title="",onmouseover="",onmouseout="",action="insert";var img=tinyMCE.imgElement;var inst=tinyMCE.getInstanceById(editor_id);if(tinyMCE.selectedElement!=null&&tinyMCE.selectedElement.nodeName.toLowerCase()=="img"){img=tinyMCE.selectedElement;tinyMCE.imgElement=img}if(img){if(tinyMCE.getAttrib(img,"name").indexOf("mce_")==0){return true}src=tinyMCE.getAttrib(img,"src");alt=tinyMCE.getAttrib(img,"alt");if(alt==""){alt=tinyMCE.getAttrib(img,"title")}if(tinyMCE.isGecko){var w=img.style.width;if(w!=null&&w!=""){img.setAttribute("width",w)}var h=img.style.height;if(h!=null&&h!=""){img.setAttribute("height",h)}}border=tinyMCE.getAttrib(img,"border");hspace=tinyMCE.getAttrib(img,"hspace");vspace=tinyMCE.getAttrib(img,"vspace");width=tinyMCE.getAttrib(img,"width");height=tinyMCE.getAttrib(img,"height");align=tinyMCE.getAttrib(img,"align");onmouseover=tinyMCE.getAttrib(img,"onmouseover");onmouseout=tinyMCE.getAttrib(img,"onmouseout");title=tinyMCE.getAttrib(img,"title");if(tinyMCE.isMSIE){width=img.attributes.width.specified?width:"";height=img.attributes.height.specified?height:""}src=eval(tinyMCE.settings.urlconverter_callback+"(src, img, true);");mceRealSrc=tinyMCE.getAttrib(img,"mce_src");if(mceRealSrc!=""){src=mceRealSrc;if(tinyMCE.getParam("convert_urls")){src=eval(tinyMCE.settings.urlconverter_callback+"(src, img, true);")}}action="update"}var template=new Array();template.file="image.htm?src={$src}";template.width=355;template.height=265+(tinyMCE.isMSIE?25:0);template.width+=tinyMCE.getLang("lang_insert_image_delta_width",0);template.height+=tinyMCE.getLang("lang_insert_image_delta_height",0);if(inst.settings.insertimage_callback){var returnVal=eval(inst.settings.insertimage_callback+"(src, alt, border, hspace, vspace, width, height, align, title, onmouseover, onmouseout, action);");if(returnVal&&returnVal.src){TinyMCE_UmbracoTheme._insertImage(returnVal.src,returnVal.alt,returnVal.border,returnVal.hspace,returnVal.vspace,returnVal.width,returnVal.height,returnVal.align,returnVal.title,returnVal.onmouseover,returnVal.onmouseout)}}else{tinyMCE.openWindow(template,{src:src,alt:alt,border:border,hspace:hspace,vspace:vspace,width:width,height:height,align:align,title:title,onmouseover:onmouseover,onmouseout:onmouseout,action:action,inline:"yes"})}return true;case"mceForeColor":var template=new Array();var elm=tinyMCE.selectedInstance.getFocusElement();var inputColor=tinyMCE.getAttrib(elm,"color");if(inputColor==""){inputColor=elm.style.color}if(!inputColor){inputColor="#000000"}template.file="color_picker.htm";template.width=220;template.height=190;tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes",command:"forecolor",input_color:inputColor});return true;case"mceBackColor":var template=new Array();var elm=tinyMCE.selectedInstance.getFocusElement();var inputColor=elm.style.backgroundColor;if(!inputColor){inputColor="#000000"}template.file="color_picker.htm";template.width=220;template.height=190;template.width+=tinyMCE.getLang("lang_theme_umbraco_backcolor_delta_width",0);template.height+=tinyMCE.getLang("lang_theme_umbraco_backcolor_delta_height",0);tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes",command:"HiliteColor",input_color:inputColor});return true;case"mceColorPicker":if(user_interface){var template=new Array();var inputColor=value.document.getElementById(value.element_id).value;template.file="color_picker.htm";template.width=220;template.height=190;template.close_previous="no";template.width+=tinyMCE.getLang("lang_theme_umbraco_colorpicker_delta_width",0);template.height+=tinyMCE.getLang("lang_theme_umbraco_colorpicker_delta_height",0);if(typeof(value.store_selection)=="undefined"){value.store_selection=true}tinyMCE.lastColorPickerValue=value;tinyMCE.openWindow(template,{editor_id:editor_id,mce_store_selection:value.store_selection,inline:"yes",command:"mceColorPicker",input_color:inputColor})}else{var savedVal=tinyMCE.lastColorPickerValue;var elm=savedVal.document.getElementById(savedVal.element_id);elm.value=value;if(elm.onchange!=null&&elm.onchange!=""){eval("elm.onchange();")}}return true;case"mceCodeEditor":var template=new Array();template.file="source_editor.htm";template.width=parseInt(tinyMCE.getParam("theme_umbraco_source_editor_width",720));template.height=parseInt(tinyMCE.getParam("theme_umbraco_source_editor_height",580));tinyMCE.openWindow(template,{editor_id:editor_id,resizable:"yes",scrollbars:"no",inline:"yes"});return true;case"mceCharMap":var template=new Array();template.file="charmap.htm";template.width=550+(tinyMCE.isOpera?40:0);template.height=250;template.width+=tinyMCE.getLang("lang_theme_umbraco_charmap_delta_width",0);template.height+=tinyMCE.getLang("lang_theme_umbraco_charmap_delta_height",0);tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes"});return true;case"mceInsertAnchor":var template=new Array();template.file="anchor.htm";template.width=320;template.height=90+(tinyMCE.isNS7?30:0);template.width+=tinyMCE.getLang("lang_theme_umbraco_anchor_delta_width",0);template.height+=tinyMCE.getLang("lang_theme_umbraco_anchor_delta_height",0);tinyMCE.openWindow(template,{editor_id:editor_id,inline:"yes"});return true;case"mceNewDocument":if(confirm(tinyMCE.getLang("lang_newdocument"))){tinyMCE.execInstanceCommand(editor_id,"mceSetContent",false," ")}return true}return false},getEditorTemplate:function(settings,editorId){function removeFromArray(in_array,remove_array){var outArray=new Array();for(var i=0;i<in_array.length;i++){skip=false;for(var j=0;j<remove_array.length;j++){if(in_array[i]==remove_array[j]){skip=true}}if(!skip){outArray[outArray.length]=in_array[i]}}return outArray}function addToArray(in_array,add_array){for(var i=0;i<add_array.length;i++){in_array[in_array.length]=add_array[i]}return in_array}var template=new Array();var deltaHeight=0;var resizing=tinyMCE.getParam("theme_umbraco_resizing",false);var path=tinyMCE.getParam("theme_umbraco_path",true);var statusbarHTML='<div id="{$editor_id}_path" class="mceStatusbarPathText" style="display: '+(path?"block":"none")+'">&#160;</div><div id="{$editor_id}_resize" class="mceStatusbarResize" style="display: '+(resizing?"block":"none")+'" onmousedown="tinyMCE.themes.umbraco._setResizing(event,\'{$editor_id}\',true);"></div><br style="clear: both" />';var layoutManager=tinyMCE.getParam("theme_umbraco_layout_manager","SimpleLayout");var styleSelectHTML='<option value="">{$lang_theme_style_select}</option>';if(settings.theme_umbraco_styles){var stylesAr=settings.theme_umbraco_styles.split(";");for(var i=0;i<stylesAr.length;i++){var key,value;key=stylesAr[i].split("=")[0];value=stylesAr[i].split("=")[1];styleSelectHTML+='<option value="'+value+'">'+key+"</option>"}TinyMCE_UmbracoTheme._autoImportCSSClasses=false}switch(layoutManager){case"SimpleLayout":var toolbarHTML="";var toolbarLocation=tinyMCE.getParam("theme_umbraco_toolbar_location","bottom");var toolbarAlign=tinyMCE.getParam("theme_umbraco_toolbar_align","center");var pathLocation=tinyMCE.getParam("theme_umbraco_path_location","none");var statusbarLocation=tinyMCE.getParam("theme_umbraco_statusbar_location",pathLocation);var defVals={theme_umbraco_buttons1:"bold,italic,underline,strikethrough,separator,justifyleft,justifycenter,justifyright,justifyfull,separator,styleselect,formatselect",theme_umbraco_buttons2:"bullist,numlist,separator,outdent,indent,separator,undo,redo,separator,link,unlink,anchor,image,cleanup,help,code",theme_umbraco_buttons3:"hr,removeformat,visualaid,separator,sub,sup,separator,charmap"};toolbarHTML+='<a href="#" accesskey="q" title="'+tinyMCE.getLang("lang_toolbar_focus")+'"';if(!tinyMCE.getParam("accessibility_focus")){toolbarHTML+=" onfocus=\"tinyMCE.getInstanceById('"+editorId+"').getWin().focus();\""}toolbarHTML+="></a>";for(var i=1;i<100;i++){var def=defVals["theme_umbraco_buttons"+i];var buttons=tinyMCE.getParam("theme_umbraco_buttons"+i,def==null?"":def,true,",");if(buttons.length==0){break}buttons=removeFromArray(buttons,tinyMCE.getParam("theme_umbraco_disable","",true,","));buttons=addToArray(buttons,tinyMCE.getParam("theme_umbraco_buttons"+i+"_add","",true,","));buttons=addToArray(tinyMCE.getParam("theme_umbraco_buttons"+i+"_add_before","",true,","),buttons);for(var b=0;b<buttons.length;b++){toolbarHTML+=tinyMCE.getControlHTML(buttons[b])}if(buttons.length>0){toolbarHTML+="<br />";deltaHeight-=23}}toolbarHTML+='<a href="#" accesskey="z" onfocus="tinyMCE.getInstanceById(\''+editorId+"').getWin().focus();\"></a>";template.html='<table class="mceEditor" border="0" cellpadding="0" cellspacing="0" width="{$width}" height="{$height}" style="width:{$width}px;height:{$height}px"><tbody>';if(toolbarLocation=="top"){template.html+='<tr><td class="mceToolbarTop" align="'+toolbarAlign+'" height="1" nowrap="nowrap">'+toolbarHTML+"</td></tr>"}if(statusbarLocation=="top"){template.html+='<tr><td class="mceStatusbarTop" height="1">'+statusbarHTML+"</td></tr>";deltaHeight-=23}template.html+='<tr><td align="center"><span id="{$editor_id}"></span></td></tr>';if(toolbarLocation=="bottom"){template.html+='<tr><td class="mceToolbarBottom" align="'+toolbarAlign+'" height="1">'+toolbarHTML+"</td></tr>"}if(toolbarLocation=="external"){var bod=document.body;var elm=document.createElement("div");toolbarHTML=tinyMCE.replaceVar(toolbarHTML,"style_select_options",styleSelectHTML);toolbarHTML=tinyMCE.applyTemplate(toolbarHTML,{editor_id:editorId});elm.className="mceToolbarExternal";elm.id=editorId+"_toolbar";elm.innerHTML='<table width="100%" border="0" align="center"><tr><td align="center">'+toolbarHTML+"</td></tr></table>";bod.appendChild(elm);deltaHeight=0;tinyMCE.getInstanceById(editorId).toolbarElement=elm}else{tinyMCE.getInstanceById(editorId).toolbarElement=null}if(statusbarLocation=="bottom"){template.html+='<tr><td class="mceStatusbarBottom" height="1">'+statusbarHTML+"</td></tr>";deltaHeight-=23}template.html+="</tbody></table>";break;case"RowLayout":template.html='<table class="mceEditor" border="0" cellpadding="0" cellspacing="0" width="{$width}" height="{$height}" style="width:{$width}px;height:{$height}px"><tbody>';var containers=tinyMCE.getParam("theme_umbraco_containers","",true,",");var defaultContainerCSS=tinyMCE.getParam("theme_umbraco_containers_default_class","container");var defaultContainerAlign=tinyMCE.getParam("theme_umbraco_containers_default_align","center");for(var i=0;i<containers.length;i++){if(containers[i]=="mceEditor"){template.html+='<tr><td align="center" class="mceEditor_border"><span id="{$editor_id}"></span></td></tr>'}else{if(containers[i]=="mceElementpath"||containers[i]=="mceStatusbar"){var pathClass="mceStatusbar";if(i==containers.length-1){pathClass="mceStatusbarBottom"}else{if(i==0){pathClass="mceStatusbar"}else{deltaHeight-=2}}template.html+='<tr><td class="'+pathClass+'" height="1">'+statusbarHTML+"</td></tr>";deltaHeight-=22}else{var curContainer=tinyMCE.getParam("theme_umbraco_container_"+containers[i],"",true,",");var curContainerHTML="";var curAlign=tinyMCE.getParam("theme_umbraco_container_"+containers[i]+"_align",defaultContainerAlign);var curCSS=tinyMCE.getParam("theme_umbraco_container_"+containers[i]+"_class",defaultContainerCSS);for(var j=0;j<curContainer.length;j++){curContainerHTML+=tinyMCE.getControlHTML(curContainer[j])}if(curContainer.length>0){curContainerHTML+="<br />";deltaHeight-=23}template.html+='<tr><td class="'+curCSS+'" align="'+curAlign+'" height="1">'+curContainerHTML+"</td></tr>"}}}template.html+="</tbody></table>";break;case"CustomLayout":var customLayout=tinyMCE.getParam("theme_umbraco_custom_layout","");if(customLayout!=""&&eval("typeof("+customLayout+")")!="undefined"){template=eval(customLayout+"(template);")}break}if(resizing){template.html+='<span id="{$editor_id}_resize_box" class="mceResizeBox"></span>'}template.html=tinyMCE.replaceVar(template.html,"style_select_options",styleSelectHTML);template.delta_width=0;template.delta_height=deltaHeight;return template},initInstance:function(C){if(tinyMCE.getParam("theme_umbraco_resizing",false)){if(tinyMCE.getParam("theme_umbraco_resizing_use_cookie",true)){var A=TinyMCE_UmbracoTheme._getCookie("TinyMCE_"+C.editorId+"_width");var B=TinyMCE_UmbracoTheme._getCookie("TinyMCE_"+C.editorId+"_height");TinyMCE_UmbracoTheme._resizeTo(C,A,B,tinyMCE.getParam("theme_umbraco_resize_horizontal",true))}}C.addShortcut("ctrl","k","lang_link_desc","mceLink")},handleNodeChange:function(E,c,R,a,V,Y,Q){function S(k,o,l){l=typeof(l)=="undefined"?false:true;if(k){for(var n=0;n<k.options.length;n++){var m=""+k.options[n].value;if(l&&m.toLowerCase().indexOf(o.toLowerCase())==0){k.selectedIndex=n;return true}if(m==o){k.selectedIndex=n;return true}}}return false}function L(k,i){return k.getAttribute(i)?k.getAttribute(i):""}if(c==null){return}var H=document.getElementById(E+"_path");var G=tinyMCE.getInstanceById(E);var j=G.getDoc();if(H){var O=c;var Z=new Array();while(O!=null){if(O.nodeName.toUpperCase()=="BODY"){break}if(O.nodeType==1&&tinyMCE.getAttrib(O,"class").indexOf("mceItemHidden")==-1){Z[Z.length]=O}O=O.parentNode}var T="";for(var g=Z.length-1;g>=0;g--){var C=Z[g].nodeName.toLowerCase();var B="";if(C=="b"){C="strong"}if(C=="i"){C="em"}if(C=="span"){var N=tinyMCE.getAttrib(Z[g],"class");if(N!=""&&N.indexOf("mceItem")==-1){B+="class: "+N+" "}var b=tinyMCE.getAttrib(Z[g],"style");if(b!=""){b=tinyMCE.serializeStyle(tinyMCE.parseStyle(b));B+="style: "+b+" "}}if(C=="font"){if(tinyMCE.getParam("convert_fonts_to_spans")){C="span"}var P=tinyMCE.getAttrib(Z[g],"face");if(P!=""){B+="font: "+P+" "}var X=tinyMCE.getAttrib(Z[g],"size");if(X!=""){B+="size: "+X+" "}var d=tinyMCE.getAttrib(Z[g],"color");if(d!=""){B+="color: "+d+" "}}if(L(Z[g],"id")!=""){B+="id: "+Z[g].getAttribute("id")+" "}var F=tinyMCE.getVisualAidClass(tinyMCE.getAttrib(Z[g],"class"),false);if(F!=""&&F.indexOf("mceItem")==-1){B+="class: "+F+" "}if(L(Z[g],"src")!=""){var K=tinyMCE.getAttrib(Z[g],"mce_src");if(K==""){K=tinyMCE.getAttrib(Z[g],"src")}B+="src: "+K+" "}if(L(Z[g],"href")!=""){var f=tinyMCE.getAttrib(Z[g],"mce_href");if(f==""){f=tinyMCE.getAttrib(Z[g],"href")}B+="href: "+f+" "}if(C=="img"&&tinyMCE.getAttrib(Z[g],"class").indexOf("mceItemFlash")!=-1){C="flash";B="src: "+Z[g].getAttribute("title")}if(C=="a"&&(anchor=tinyMCE.getAttrib(Z[g],"name"))!=""){C="a";C+="#"+anchor;B=""}if(L(Z[g],"name").indexOf("mce_")!=0){var F=tinyMCE.getVisualAidClass(tinyMCE.getAttrib(Z[g],"class"),false);if(F!=""&&F.indexOf("mceItem")==-1){C+="."+F}}var e="tinyMCE.execInstanceCommand('"+E+"','mceSelectNodeDepth',false,'"+g+"');";T+='<a title="'+B+'" href="javascript:'+e+'" onclick="'+e+'return false;" onmousedown="return false;" target="_self" class="mcePathItem">'+C+"</a>";if(g>0){T+=" &raquo; "}}H.innerHTML='<a href="#" accesskey="x"></a>'+tinyMCE.getLang("lang_theme_path")+": "+T+"&#160;"}tinyMCE.switchClass(E+"_justifyleft","mceButtonNormal");tinyMCE.switchClass(E+"_justifyright","mceButtonNormal");tinyMCE.switchClass(E+"_justifycenter","mceButtonNormal");tinyMCE.switchClass(E+"_justifyfull","mceButtonNormal");tinyMCE.switchClass(E+"_bold","mceButtonNormal");tinyMCE.switchClass(E+"_italic","mceButtonNormal");tinyMCE.switchClass(E+"_underline","mceButtonNormal");tinyMCE.switchClass(E+"_strikethrough","mceButtonNormal");tinyMCE.switchClass(E+"_bullist","mceButtonNormal");tinyMCE.switchClass(E+"_numlist","mceButtonNormal");tinyMCE.switchClass(E+"_sub","mceButtonNormal");tinyMCE.switchClass(E+"_sup","mceButtonNormal");tinyMCE.switchClass(E+"_anchor","mceButtonNormal");tinyMCE.switchClass(E+"_link","mceButtonDisabled");tinyMCE.switchClass(E+"_unlink","mceButtonDisabled");tinyMCE.switchClass(E+"_outdent","mceButtonDisabled");tinyMCE.switchClass(E+"_image","mceButtonNormal");tinyMCE.switchClass(E+"_hr","mceButtonNormal");if(c.nodeName=="A"&&tinyMCE.getAttrib(c,"class").indexOf("mceItemAnchor")!=-1){tinyMCE.switchClass(E+"_anchor","mceButtonSelected")}var M=tinyMCE.getParentElement(c,"a","href");if(M||Y){tinyMCE.switchClass(E+"_link",M?"mceButtonSelected":"mceButtonNormal");tinyMCE.switchClass(E+"_unlink",M?"mceButtonSelected":"mceButtonNormal")}tinyMCE.switchClass(E+"_visualaid",V?"mceButtonSelected":"mceButtonNormal");if(a!=-1){tinyMCE.switchClass(E+"_undo","mceButtonDisabled");tinyMCE.switchClass(E+"_redo","mceButtonDisabled")}if(tinyMCE.getParentElement(c,"li,blockquote")){tinyMCE.switchClass(E+"_outdent","mceButtonNormal")}if(R!=-1&&(R<a-1&&a>0)){tinyMCE.switchClass(E+"_redo","mceButtonNormal")}if(R!=-1&&(R>0&&a>0)){tinyMCE.switchClass(E+"_undo","mceButtonNormal")}var D=document.getElementById(E+"_styleSelect");if(D){TinyMCE_UmbracoTheme._setupCSSClasses(E);classNode=c;breakOut=false;var J=0;do{if(classNode&&classNode.className){for(var g=0;g<D.options.length;g++){if(D.options[g].value==classNode.className){J=g;breakOut=true;break}}}}while(!breakOut&&classNode!=null&&(classNode=classNode.parentNode)!=null);D.selectedIndex=J}var D=document.getElementById(E+"_formatSelect");if(D){var I=tinyMCE.getParentElement(c,"p,div,h1,h2,h3,h4,h5,h6,pre,address");if(I){S(D,"<"+I.nodeName.toLowerCase()+">")}else{S(D,"")}}var D=document.getElementById(E+"_fontNameSelect");if(D){if(!tinyMCE.isSafari&&!(tinyMCE.isMSIE&&!tinyMCE.isOpera)){var P=G.queryCommandValue("FontName");P=P==null||P==""?"":P;S(D,P,P!="")}else{var I=tinyMCE.getParentElement(c,"font","face");if(I){var h=tinyMCE.getAttrib(I,"face");if(h==""){h=""+I.style.fontFamily}if(!S(D,h,h!="")){S(D,"")}}else{S(D,"")}}}var D=document.getElementById(E+"_fontSizeSelect");if(D){if(!tinyMCE.isSafari&&!tinyMCE.isOpera){var X=G.queryCommandValue("FontSize");S(D,X==null||X==""?"0":X)}else{var I=tinyMCE.getParentElement(c,"font","size");if(I){var X=tinyMCE.getAttrib(I,"size");if(X==""){var A=new Array("","8px","10px","12px","14px","18px","24px","36px");X=""+I.style.fontSize;for(var g=0;g<A.length;g++){if((""+A[g])==X){X=g;break}}}if(!S(D,X)){S(D,"")}}else{S(D,"0")}}}alignNode=c;breakOut=false;do{if(!alignNode.getAttribute||!alignNode.getAttribute("align")){continue}switch(alignNode.getAttribute("align").toLowerCase()){case"left":tinyMCE.switchClass(E+"_justifyleft","mceButtonSelected");breakOut=true;break;case"right":tinyMCE.switchClass(E+"_justifyright","mceButtonSelected");breakOut=true;break;case"middle":case"center":tinyMCE.switchClass(E+"_justifycenter","mceButtonSelected");breakOut=true;break;case"justify":tinyMCE.switchClass(E+"_justifyfull","mceButtonSelected");breakOut=true;break}}while(!breakOut&&(alignNode=alignNode.parentNode)!=null);var U=tinyMCE.getParentElement(c,"div");if(U&&U.style.textAlign=="center"){tinyMCE.switchClass(E+"_justifycenter","mceButtonSelected")}if(!Q){var W=new Array("Bold","_bold","Italic","_italic","Strikethrough","_strikethrough","superscript","_sup","subscript","_sub");for(var g=0;g<W.length;g+=2){if(G.queryCommandState(W[g])){tinyMCE.switchClass(E+W[g+1],"mceButtonSelected")}}if(G.queryCommandState("Underline")&&(c.parentNode==null||c.parentNode.nodeName!="A")){tinyMCE.switchClass(E+"_underline","mceButtonSelected")}}do{switch(c.nodeName){case"UL":tinyMCE.switchClass(E+"_bullist","mceButtonSelected");break;case"OL":tinyMCE.switchClass(E+"_numlist","mceButtonSelected");break;case"HR":tinyMCE.switchClass(E+"_hr","mceButtonSelected");break;case"IMG":if(L(c,"name").indexOf("mce_")!=0){tinyMCE.switchClass(E+"_image","mceButtonSelected")}break}}while((c=c.parentNode)!=null)},_setupCSSClasses:function(D){var B,A;if(!TinyMCE_UmbracoTheme._autoImportCSSClasses){return}A=document.getElementById(D+"_styleSelect");if(A&&A.getAttribute("cssImported")!="true"){var C=tinyMCE.getCSSClasses(D);if(C&&A){for(B=0;B<C.length;B++){A.options[A.options.length]=new Option(C[B],C[B])}}if(C!=null&&C.length>0){A.setAttribute("cssImported","true")}}},_setCookie:function(C,E,A,G,D,F){var B=C+"="+escape(E)+((A)?"; expires="+A.toGMTString():"")+((G)?"; path="+escape(G):"")+((D)?"; domain="+D:"")+((F)?"; secure":"");document.cookie=B},_getCookie:function(C){var B=document.cookie;var E=C+"=";var D=B.indexOf("; "+E);if(D==-1){D=B.indexOf(E);if(D!=0){return null}}else{D+=2}var A=document.cookie.indexOf(";",D);if(A==-1){A=B.length}return unescape(B.substring(D+E.length,A))},_resizeTo:function(D,I,F,G){var E=document.getElementById(D.editorId+"_parent");var H=E.firstChild;var C=D.iframeElement;if(I==null||I=="null"){G=false;I=0}if(F==null||F=="null"){return}I=parseInt(I);F=parseInt(F);if(tinyMCE.isGecko){I+=2;F+=2}var K=I-H.clientWidth;var J=F-H.clientHeight;I=I<1?30:I;F=F<1?30:F;if(G){H.style.width=I+"px"}H.style.height=F+"px";iw=C.clientWidth+K;ih=C.clientHeight+J;iw=iw<1?30:iw;ih=ih<1?30:ih;if(tinyMCE.isGecko){iw-=2;ih-=2}if(G){C.style.width=iw+"px"}C.style.height=ih+"px";if(G){var B=H.firstChild;var A=B.scrollWidth;if(D.iframeElement.clientWidth<A){K=A-D.iframeElement.clientWidth;D.iframeElement.style.width=(iw+K)+"px"}}},_resizeEventHandler:function(E){var G=TinyMCE_UmbracoTheme._resizer;if(!G.resizing){return}E=typeof(E)=="undefined"?window.event:E;var I=E.screenX-G.downX;var H=E.screenY-G.downY;var B=G.resizeBox;var C=G.editorId;switch(E.type){case"mousemove":var F,D;F=G.width+I;D=G.height+H;F=F<1?1:F;D=D<1?1:D;if(G.horizontal){B.style.width=F+"px"}B.style.height=D+"px";break;case"mouseup":TinyMCE_UmbracoTheme._setResizing(E,C,false);TinyMCE_UmbracoTheme._resizeTo(tinyMCE.getInstanceById(C),G.width+I,G.height+H,G.horizontal);if(tinyMCE.getParam("theme_umbraco_resizing_use_cookie",true)){var A=new Date();A.setTime(A.getTime()+3600000*24*30);TinyMCE_UmbracoTheme._setCookie("TinyMCE_"+C+"_width",""+(G.horizontal?G.width+I:""),A);TinyMCE_UmbracoTheme._setCookie("TinyMCE_"+C+"_height",""+(G.height+H),A)}break}},_setResizing:function(G,H,A){G=typeof(G)=="undefined"?window.event:G;var I=TinyMCE_UmbracoTheme._resizer;var E=document.getElementById(H+"_parent");var F=document.getElementById(H+"_parent").firstChild;var C=document.getElementById(H+"_resize_box");var D=tinyMCE.getInstanceById(H);if(A){var B=F.clientWidth;var J=F.clientHeight;C.style.width=B+"px";C.style.height=J+"px";I.iframeWidth=D.iframeElement.clientWidth;I.iframeHeight=D.iframeElement.clientHeight;F.style.display="none";C.style.display="block";if(!I.eventHandlers){if(tinyMCE.isMSIE){tinyMCE.addEvent(document,"mousemove",TinyMCE_UmbracoTheme._resizeEventHandler)}else{tinyMCE.addEvent(window,"mousemove",TinyMCE_UmbracoTheme._resizeEventHandler)}tinyMCE.addEvent(document,"mouseup",TinyMCE_UmbracoTheme._resizeEventHandler);I.eventHandlers=true}I.resizing=true;I.downX=G.screenX;I.downY=G.screenY;I.width=parseInt(C.style.width);I.height=parseInt(C.style.height);I.editorId=H;I.resizeBox=C;I.horizontal=tinyMCE.getParam("theme_umbraco_resize_horizontal",true)}else{I.resizing=false;C.style.display="none";F.style.display=tinyMCE.isMSIE&&!tinyMCE.isOpera?"block":"table";tinyMCE.execCommand("mceResetDesignMode")}},_insertImage:function(src,alt,border,hspace,vspace,width,height,align,title,onmouseover,onmouseout){tinyMCE.execCommand("mceBeginUndoLevel");if(src==""){return}if(!tinyMCE.imgElement&&tinyMCE.isSafari){var html="";html+='<img src="'+src+'" alt="'+alt+'"';html+=' border="'+border+'" hspace="'+hspace+'"';html+=' vspace="'+vspace+'" width="'+width+'"';html+=' height="'+height+'" align="'+align+'" title="'+title+'" onmouseover="'+onmouseover+'" onmouseout="'+onmouseout+'" />';tinyMCE.execCommand("mceInsertContent",false,html)}else{if(!tinyMCE.imgElement&&tinyMCE.selectedInstance){if(tinyMCE.isSafari){tinyMCE.execCommand("mceInsertContent",false,'<img src="'+tinyMCE.uniqueURL+'" />')}else{tinyMCE.selectedInstance.contentDocument.execCommand("insertimage",false,tinyMCE.uniqueURL)}tinyMCE.imgElement=tinyMCE.getElementByAttributeValue(tinyMCE.selectedInstance.contentDocument.body,"img","src",tinyMCE.uniqueURL)}}if(tinyMCE.imgElement){var needsRepaint=false;var msrc=src;src=eval(tinyMCE.settings.urlconverter_callback+"(src, tinyMCE.imgElement);");if(tinyMCE.getParam("convert_urls")){msrc=src}if(onmouseover&&onmouseover!=""){onmouseover="this.src='"+eval(tinyMCE.settings.urlconverter_callback+"(onmouseover, tinyMCE.imgElement);")+"';"}if(onmouseout&&onmouseout!=""){onmouseout="this.src='"+eval(tinyMCE.settings.urlconverter_callback+"(onmouseout, tinyMCE.imgElement);")+"';"}if(typeof(title)=="undefined"){title=alt}if(width!=tinyMCE.imgElement.getAttribute("width")||height!=tinyMCE.imgElement.getAttribute("height")||align!=tinyMCE.imgElement.getAttribute("align")){needsRepaint=true}tinyMCE.setAttrib(tinyMCE.imgElement,"src",src);tinyMCE.setAttrib(tinyMCE.imgElement,"mce_src",msrc);tinyMCE.setAttrib(tinyMCE.imgElement,"alt",alt);tinyMCE.setAttrib(tinyMCE.imgElement,"title",title);tinyMCE.setAttrib(tinyMCE.imgElement,"align",align);tinyMCE.setAttrib(tinyMCE.imgElement,"border",border,true);tinyMCE.setAttrib(tinyMCE.imgElement,"hspace",hspace,true);tinyMCE.setAttrib(tinyMCE.imgElement,"vspace",vspace,true);tinyMCE.setAttrib(tinyMCE.imgElement,"width",width,true);tinyMCE.setAttrib(tinyMCE.imgElement,"height",height,true);tinyMCE.setAttrib(tinyMCE.imgElement,"onmouseover",onmouseover);tinyMCE.setAttrib(tinyMCE.imgElement,"onmouseout",onmouseout);if(width&&width!=""){tinyMCE.imgElement.style.pixelWidth=width}if(height&&height!=""){tinyMCE.imgElement.style.pixelHeight=height}if(needsRepaint){tinyMCE.selectedInstance.repaint()}}tinyMCE.execCommand("mceEndUndoLevel")},_insertLink:function(href,target,title,onclick,style_class){tinyMCE.execCommand("mceBeginUndoLevel");if(tinyMCE.selectedInstance&&tinyMCE.selectedElement&&tinyMCE.selectedElement.nodeName.toLowerCase()=="img"){var doc=tinyMCE.selectedInstance.getDoc();var linkElement=tinyMCE.getParentElement(tinyMCE.selectedElement,"a");var newLink=false;if(!linkElement){linkElement=doc.createElement("a");newLink=true}var mhref=href;var thref=eval(tinyMCE.settings.urlconverter_callback+"(href, linkElement);");mhref=tinyMCE.getParam("convert_urls")?href:mhref;tinyMCE.setAttrib(linkElement,"href",thref);tinyMCE.setAttrib(linkElement,"mce_href",mhref);tinyMCE.setAttrib(linkElement,"target",target);tinyMCE.setAttrib(linkElement,"title",title);tinyMCE.setAttrib(linkElement,"onclick",onclick);tinyMCE.setAttrib(linkElement,"class",style_class);if(newLink){linkElement.appendChild(tinyMCE.selectedElement.cloneNode(true));tinyMCE.selectedElement.parentNode.replaceChild(linkElement,tinyMCE.selectedElement)}return}if(!tinyMCE.linkElement&&tinyMCE.selectedInstance){if(tinyMCE.isSafari){tinyMCE.execCommand("mceInsertContent",false,'<a href="'+tinyMCE.uniqueURL+'">'+tinyMCE.selectedInstance.selection.getSelectedHTML()+"</a>")}else{tinyMCE.selectedInstance.contentDocument.execCommand("createlink",false,tinyMCE.uniqueURL)}tinyMCE.linkElement=tinyMCE.getElementByAttributeValue(tinyMCE.selectedInstance.contentDocument.body,"a","href",tinyMCE.uniqueURL);var elementArray=tinyMCE.getElementsByAttributeValue(tinyMCE.selectedInstance.contentDocument.body,"a","href",tinyMCE.uniqueURL);for(var i=0;i<elementArray.length;i++){var mhref=href;var thref=eval(tinyMCE.settings.urlconverter_callback+"(href, elementArray[i]);");mhref=tinyMCE.getParam("convert_urls")?href:mhref;tinyMCE.setAttrib(elementArray[i],"href",thref);tinyMCE.setAttrib(elementArray[i],"mce_href",mhref);tinyMCE.setAttrib(elementArray[i],"target",target);tinyMCE.setAttrib(elementArray[i],"title",title);tinyMCE.setAttrib(elementArray[i],"onclick",onclick);tinyMCE.setAttrib(elementArray[i],"class",style_class)}tinyMCE.linkElement=elementArray[0]}if(tinyMCE.linkElement){var mhref=href;href=eval(tinyMCE.settings.urlconverter_callback+"(href, tinyMCE.linkElement);");mhref=tinyMCE.getParam("convert_urls")?href:mhref;tinyMCE.setAttrib(tinyMCE.linkElement,"href",href);tinyMCE.setAttrib(tinyMCE.linkElement,"mce_href",mhref);tinyMCE.setAttrib(tinyMCE.linkElement,"target",target);tinyMCE.setAttrib(tinyMCE.linkElement,"title",title);tinyMCE.setAttrib(tinyMCE.linkElement,"onclick",onclick);tinyMCE.setAttrib(tinyMCE.linkElement,"class",style_class)}tinyMCE.execCommand("mceEndUndoLevel")}};tinyMCE.addTheme("umbraco",TinyMCE_UmbracoTheme);tinyMCE.addButtonMap(TinyMCE_UmbracoTheme._buttonMap);