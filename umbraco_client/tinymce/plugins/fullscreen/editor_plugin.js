tinyMCE.importPluginLanguagePack("fullscreen");var TinyMCE_FullScreenPlugin={getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://tinymce.moxiecode.com/tinymce/docs/plugin_fullscreen.html",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},initInstance:function(A){if(!tinyMCE.settings.fullscreen_skip_plugin_css){tinyMCE.importCSS(A.getContainerWin().document,tinyMCE.baseURL+"/plugins/fullscreen/css/page.css")}},getControlHTML:function(A){switch(A){case"fullscreen":return tinyMCE.getButtonHTML(A,"lang_fullscreen_desc","{$pluginurl}/images/fullscreen.gif","mceFullScreen")}return""},execCommand:function(E,A,D,F,C){var B;switch(D){case"mceFullScreen":B=tinyMCE.getInstanceById(E);if(tinyMCE.getParam("fullscreen_new_window")){this._toggleFullscreenWin(B)}else{this._toggleFullscreen(B)}return true}return false},_toggleFullscreenWin:function(A){if(tinyMCE.getParam("fullscreen_is_enabled")){window.opener.tinyMCE.execInstanceCommand(tinyMCE.getParam("fullscreen_editor_id"),"mceSetContent",false,tinyMCE.getContent(A.editorId));top.close()}else{tinyMCE.setWindowArg("editor_id",A.editorId);var C=window.open(tinyMCE.baseURL+"/plugins/fullscreen/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{C.resizeTo(screen.availWidth,screen.availHeight)}catch(B){}}},_toggleFullscreen:function(H){var C=H.getData("fullscreen"),I,J,D,A,E,B,O,K,G,F,N,M=0,L,P;E=H.getContainerWin();B=E.document;I=B.getElementById(H.editorId+"_parent");J=I.firstChild;D=H.iframeElement;O=B.getElementById(H.editorId+"_resize");N=document.getElementById("mce_fullscreen_blocker");if(!C.enabled){if(H.toolbarElement){M+=H.toolbarElement.offsetHeight;L=J.tBodies[0].insertRow(0).insertCell(-1);L.className="mceToolbarTop";L.nowrap=true;C.oldToolbarParent=H.toolbarElement.parentNode;C.toolbarHolder=document.createTextNode("...");L.appendChild(C.oldToolbarParent.replaceChild(C.toolbarHolder,H.toolbarElement))}C.parents=[];A=tinyMCE.getViewPort(E);C.scrollX=A.left;C.scrollY=A.top;if(!tinyMCE.isOpera){tinyMCE.addCSSClass(B.body,"mceFullscreen")}tinyMCE.getParentNode(J.parentNode,function(Q){if(Q.nodeName=="BODY"){return true}if(Q.nodeType==1){tinyMCE.addCSSClass(Q,"mceFullscreenPos")}return false});if(O){O.style.display="none"}A=tinyMCE.getViewPort(E);C.oldWidth=D.style.width?D.style.width:D.offsetWidth;C.oldHeight=D.style.height?D.style.height:D.offsetHeight;C.oldTWidth=J.style.width?J.style.width:J.offsetWidth;C.oldTHeight=J.style.height?J.style.height:J.offsetHeight;if(C.oldWidth&&C.oldWidth.indexOf){C.oldTWidth=C.oldWidth.indexOf("%")!=-1?C.oldWidth:C.oldTWidth}if(!N&&tinyMCE.isRealIE){N=tinyMCE.createTag(document,"iframe",{id:"mce_fullscreen_blocker",src:"about:blank",frameBorder:0,width:A.width,height:A.height,style:"display: block; position: absolute; left: 0; top: 0; z-index: 999; margin: 0; padding: 0;"});document.body.appendChild(N)}J.style.position="absolute";J.style.zIndex=1000;J.style.left=J.style.top="0";J.style.width=A.width+"px";J.style.height=A.height+"px";if(tinyMCE.isRealIE){D.style.width=A.width+"px";D.style.height=A.height+"px";K=D.parentNode.clientWidth-(J.offsetWidth-A.width);G=D.parentNode.clientHeight-(J.offsetHeight-A.height)}else{K=D.parentNode.clientWidth;G=D.parentNode.clientHeight}D.style.width=K+"px";D.style.height=(G+M)+"px";tinyMCE.switchClass(H.editorId+"_fullscreen","mceButtonSelected");C.enabled=true;H.useCSS=false}else{if(H.toolbarElement){P=H.toolbarElement.parentNode.parentNode;P.parentNode.removeChild(P);C.oldToolbarParent.replaceChild(H.toolbarElement,C.toolbarHolder);C.oldToolbarParent=null;C.toolbarHolder=null}if(N){N.parentNode.removeChild(N)}F=0;tinyMCE.getParentNode(J.parentNode,function(Q){if(Q.nodeName=="BODY"){return true}if(Q.nodeType==1){tinyMCE.removeCSSClass(Q,"mceFullscreenPos")}});if(O&&tinyMCE.getParam("theme_advanced_resizing",false)){O.style.display="block"}J.style.position="static";J.style.zIndex="";J.style.width="";J.style.height="";J.style.width=C.oldTWidth?C.oldTWidth:"";J.style.height=C.oldTHeight?C.oldTHeight:"";D.style.width=C.oldWidth?C.oldWidth:"";D.style.height=C.oldHeight?C.oldHeight:"";tinyMCE.switchClass(H.editorId+"_fullscreen","mceButtonNormal");C.enabled=false;tinyMCE.removeCSSClass(B.body,"mceFullscreen");E.scrollTo(C.scrollX,C.scrollY);H.useCSS=false}},handleNodeChange:function(F,D,E,C,A,B){if(tinyMCE.getParam("fullscreen_is_enabled")){tinyMCE.switchClass(F+"_fullscreen","mceButtonSelected")}return true}};tinyMCE.addPlugin("fullscreen",TinyMCE_FullScreenPlugin);