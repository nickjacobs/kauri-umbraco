tinyMCE.importPluginLanguagePack("searchreplace");var TinyMCE_SearchReplacePlugin={getInfo:function(){return{longname:"Search/Replace",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://tinymce.moxiecode.com/tinymce/docs/plugin_searchreplace.html",version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion}},initInstance:function(A){A.addShortcut("ctrl","f","lang_searchreplace_search_desc","mceSearch",true)},getControlHTML:function(A){switch(A){case"search":return tinyMCE.getButtonHTML(A,"lang_searchreplace_search_desc","{$pluginurl}/images/search.gif","mceSearch",true);case"replace":return tinyMCE.getButtonHTML(A,"lang_searchreplace_replace_desc","{$pluginurl}/images/replace.gif","mceSearchReplace",true)}return""},execCommand:function(M,H,G,C,O){var I=tinyMCE.getInstanceById(M),E=I.selection.getSelectedText(),B;function L(S,R){O[S]=typeof(O[S])=="undefined"?R:O[S]}function A(R,T,S){if(!I.selection.isCollapsed()){if(tinyMCE.isRealIE){I.selection.getRng().duplicate().pasteHTML(T)}else{I.execCommand("mceInsertContent",false,T)}}}if(!O){O=[]}L("editor_id",M);L("searchstring",E);L("replacestring",null);L("replacemode","none");L("casesensitive",false);L("backwards",false);L("wrap",false);L("wholeword",false);L("inline","yes");L("resizable","no");switch(G){case"mceSearch":if(C){var P=new Array();P.file="../../plugins/searchreplace/searchreplace.htm";P.width=380;P.height=155+(tinyMCE.isNS7?20:0)+(tinyMCE.isMSIE?15:0);P.width+=tinyMCE.getLang("lang_searchreplace_delta_width",0);P.height+=tinyMCE.getLang("lang_searchreplace_delta_height",0);I.selection.collapse(true);tinyMCE.openWindow(P,O)}else{var K=tinyMCE.getInstanceById(M).contentWindow;var N=tinyMCE.getInstanceById(M).contentWindow.document;var J=tinyMCE.getInstanceById(M).contentWindow.document.body;var F=O.win,Q;if(J.innerHTML==""){F.alert(tinyMCE.getLang("lang_searchreplace_notfound"));return true}if(O.replacemode=="current"){A(O.string,O.replacestring,O.backwards);O.replacemode="none"}I.selection.collapse(O.backwards);if(tinyMCE.isMSIE){var B=I.selection.getRng();var D=0;if(O.wholeword){D=D|2}if(O.casesensitive){D=D|4}if(!B.findText){F.alert("This operation is currently not supported by this browser.");return true}if(O.replacemode=="all"){Q=false;while(B.findText(O.string,O.backwards?-1:1,D)){Q=true;B.scrollIntoView();B.select();A(O.string,O.replacestring,O.backwards)}if(Q){F.alert(tinyMCE.getLang("lang_searchreplace_allreplaced"))}else{F.alert(tinyMCE.getLang("lang_searchreplace_notfound"))}return true}if(B.findText(O.string,O.backwards?-1:1,D)){B.scrollIntoView();B.select()}else{F.alert(tinyMCE.getLang("lang_searchreplace_notfound"))}}else{if(O.replacemode=="all"){Q=false;while(K.find(O.string,O.casesensitive,O.backwards,O.wrap,O.wholeword,false,false)){Q=true;A(O.string,O.replacestring,O.backwards)}if(Q){F.alert(tinyMCE.getLang("lang_searchreplace_allreplaced"))}else{F.alert(tinyMCE.getLang("lang_searchreplace_notfound"))}return true}if(!K.find(O.string,O.casesensitive,O.backwards,O.wrap,O.wholeword,false,false)){F.alert(tinyMCE.getLang("lang_searchreplace_notfound"))}}}return true;case"mceSearchReplace":O.replacestring="";tinyMCE.execInstanceCommand(M,"mceSearch",C,O,false);return true}return false}};tinyMCE.addPlugin("searchreplace",TinyMCE_SearchReplacePlugin);